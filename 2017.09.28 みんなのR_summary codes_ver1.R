
theUrl<-"http://www.jaredlander.com/data/Tomato%20First.csv"
tomato <- read.table(file=theUrl, heder=TRUE, sep=",")

#6.1. ???????????????????????????
library(readr)
Tomato_First <- read_csv("~/Desktop/Tomato First.csv")
View(Tomato_First)

#6.5 R????????????????????????
#tomato data.frame??????????????? Error check
save (Tomato_First,file = "~/Desktop/Tomato_First.rdata")
#tomato????????? 
rm(Tomato_First)
#tomato?????????????????????????????? 
head(Tomato_First)
#rdata??????????????????tomato??????????????? 
load("~/Desktop/Tomato_First.rdata")

#6.6 R???????????????????????????

install.packages("readTable")
require(XML)
theURL <- "https://www.jaredlander.com/2012/02/another-kind-of-super-bowl-pool/"
bowlPool <- readHTMLTable(theURL)

#7: ???????????????

require(ggplot2)
data(diamonds)
head(diamonds)

hist(diamonds$carat, main="Carat Histogram", xlab = "Carat")
plot(price ~ carat, data = diamonds)
boxplot(diamonds$carat)

#7.2.1 ggplot2?????????????????????????????????????????????
#geom_histgram
ggplot(data = diamonds) + geom_histogram(aes(x=carat))

#geom_density
ggplot(data = diamonds) + geom_density (aes(x = carat), fill = "grey50")

#7.2.2 ?????????
ggplot (diamonds, aes(x=carat, y=price)) + geom_point()
g <- ggplot(diamonds, aes(x=carat, y=price))
g + geom_point(aes(color = color))

g + geom_point(aes(color = color)) + facet_wrap(~color)
g + geom_point(aes(color = color)) + facet_grid(cut ~ clarity)

#7.2.3 ????????????
ggplot(diamonds, aes(y=carat, x=1)) + geom_boxplot()
ggplot(diamonds, aes(y=carat, x=cut))+ geom_boxplot()
ggplot(diamonds, aes(y=carat, x=cut)) + geom_point() + geom_violin()

#7.2.4 ??????????????????
ggplot(economics, aes(x = date, y = pop)) + geom_line()

#lubridate??????????????????????????????
require(lubridate)
##year???month?????????????????????
economics$year <- year(economics$date)
#month??????????????????label??????: ?????????????????????????????????????????????
economics$month <- month(economics$date, label=TRUE)

#????????????????????????
# which??????: ?????????????????????????????????TRUE????????????????????????????????????????????????
econ2000 <- economics[which(economics$year >= 2000)]

#scales:?????????????????????????????????
require(scales)

#??????????????????????????????
g <- ggplot(econ2000, aes(x=month, y=pop))
#?????????????????????year???????????????????????????????????????????????????

#Group???????????????????????????????????????????????????????????????????????????
g <- g + geom_line(aes(color=factor(year), group=year))
#?????????year????????????
g<- g + scale_color_discrete(name=year)
#Y?????????????????????????????????
g <- g + scale_y_continuous(labels=commma)

as.numeric(TRUE)
as.numeric(FALSE)
1<=1 # TRUE

#9.1 ??????????????????????????????????????????if???????????????????????????
#?????????1???????????????
toCheck <- 1
#??????toCheck???1???????????????hello?????????
if(toCheck==0) 
{print("hello")}

Check.bool <- function(x) 
{+if (x == 1){print("hello")} else
{print("goodbye")}}

+ Check.bool <- function(x) 
  {+if (x == 1){print("hello")} else if (x == 0) {print("goodbye")}
  else {print("confused")}}

#9.2 Switch
use.switch <- function(x)
{switch(x,"a"="first","b"="second","others")}
use.switch("a")

#9.3 itelse
ifelse(1==1, "Yes","No")

#10.1 for?????????
for (i in 1:10)
+ {print(i)}
print(1:10)

#????????????????????????????????????????????????????????????
fruit <- c("apple", "banana", "pomegranate") 
# ???????????????????????????????????????????????????????????????NA????????????????????????
fruitLength <- rep(NA, length(fruit))
names(fruitLength)<-fruit
fruitLength

#????????????????????????????????????
for (a in fruit)
{fruitLength[a] <- nchar(a)}
fruitLength

#10.2 while?????????
x <- 1
while (x<=5)
{print(x) x<- x+1}

#10.3 ??????????????????
for (i in 1:10) 
{
  if (i == 3) 
    {
     next
    } 
  print(i)}

#11.1.1 apply??????
#???????????????
theMatrix <- matrix(1:9, nrow=3)
#??????????????????????????????
apply(theMatrix, 1, sum)
#??????????????????
apply(theMatrix, 2, sum)



#11.1.2
theList <- list(A=matrix(1:9,3), B=1:5, C=matrix(1:4,2), D=2)
lapply(theList, sum)

sapply(theList, sum)

#2????????????????????????
firstList <- list(A=matrix(1:16,4), B=matrix(1:16,2), C=1:5)
secondList <- list(A=matrix(1:16,4), B=matrix(1:16,8), C=15:1)
#???????????????????????????????????????
mapply(identical, firstList, secondList)
simpleFunc <- function(x,y)
{
  NROW(x) + NROW(y)
}

mapply(simpleFunc, firstList, secondList)

#11.2 aggregate??????
require(ggplot2)
data(diamonds)
head(diamonds)

aggregate(price ~ cut, diamonds, mean)
aggregate(price ~ cut + color, diamonds, mean)
aggregate(cbind(price, carat) ~ cut, diamonds, mean)

#11.2 llaply
theList2<- list(A=matrix(1:9,3), B=1:5, C=matrix(1:4, 2), D=2)
lapply(theList2, sum)
identical(laply(theList2, sum),llply(theList2,sum))

aggregate(price ~ cut, diamonds, each(mean,median))

#11.4 data.table
require(data.table)
theDF2 <- data.frame(A=1:10, 
                     B=letters[1:10], 
                     C=LETTERS(11:20), 
                     D=rep(c("One","Two","Three"),length.out=10))
theDT2 <- data.table(A=1:10, 
                     B=letters[1:10], 
                     C=LETTERS(11:20), 
                     D=rep(c("One","Two","Three"),length.out=10))

class(theDF2$C)

#12.1: cbind???rbind
sport <- c("Hockey", "Baseball", "Football")
league <- c("NHL", "MLB", "NFL")
trophy <- c("Stanley Cup", "Commissioners Trophy", "Vince Lambardi Trophy")
trophies1 <- cbind(sport, league, trophy)
trophies2 <- data.frame(sport=c("Bascketball", "Golf"), league=c("NBA","PGA"), trophy=c("Larry Obrien Championship Trophy", "Wanamaker Trophy"), stringsAsFactors = FALSE)
trophies <- rbind(trophies1, trophies2)
View(trophies)







